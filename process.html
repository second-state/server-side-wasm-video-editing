<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" type="text/css">
    <meta name="generator" content="HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 17.1), see www.w3.org">
    <meta charset="UTF-8">
    <title>Real-time Wasm video processing</title>
    <script type="text/javascript">
        $(document).ready(function() {
            //$("button").click(function() {
            var url = "http://3.24.150.181:8081"
            return new Promise(function(resolve, reject) {
                var xhr = new XMLHttpRequest();
                xhr.open("POST", url, true);
                xhr.setRequestHeader("Content-Type", "application/json");
                //data
                var data = {};
                data["jsonrpc"] = "2.0";
                data["method"] = "execute_run_string";
                data["id"] = "1";
                data["params"] = [{
                    "wasm_executable_id": "0x1234567890",
                    "function_name": "say_with_json",
                    "arguments": {
                        "name": "Timothy!"
                    }
                }];
                xhr.onload = function(e) {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            resolve(xhr.responseText);
                            console.log(xhr.responseText);
                        }
                    }
                };
                xhr.onerror = reject;
                xhr.open("POST", url, true);
                xhr.send(JSON.stringify(data));
            });
        });
        //});
    </script>
</head>

<body>
    <div class="container">
        <br>
        <br>
        <div class="row">
            <div class="col-12 text-center">Native server-side Wasm video processing</div>
        </div>
        <br>
        <hr>
        <br>
        <div class="row">
            <div class="col-6">
                <video class="mh-100" id="original_video_id" style="height: 300px; width: 300px;" controls autoplay>
                    <source id="original_video_src" src="change_me.mp4" type="video/mp4"> Your browser does not support HTML5 video.
                </video>
            </div>
            <div class="col-6">
                <video class="mh-100" id="processed_video_id" style="height: 300px; width: 300px;" controls autoplay>
                    <source id="processed_video_src" src="change_me.mp4" type="video/mp4"> Your browser does not support HTML5 video.
                </video>
            </div>
        </div>
        <div class="row">
            <div class="col-6">Original video</div>
            <div class="col-6">Processed video</div>
        </div>
        <br>
        <hr>
        <br>
        <div class="row">
            <div class="col-12 text-center bg-primary text-white">Powered by SecondState and WebAssembly</div>
        </div>
        <div class="row">
            <div class="col-12 text-center"><p>Your video has been uploaded and is undergoing frame-by-frame, pixel-by-pixel editing natively inside a server-side Wasm VM. There is no processing happening in your browser. Your banadwidth is not being used to perform the image processing. Video processing is being taken care of by SecondState server on your behalf.</p></div>
        </div>
        <br>
        <br>
        <div class="row">
            <div class="col-6"><img src="http://3.24.150.181:8080/header_images/ss.png" class="mh-100 img-fluid rounded float-left" style="height: 300px; width: 300px;"></div>
            <div class="col-6"><img src="http://3.24.150.181:8080/header_images/wa.svg" class="mh-100 img-fluid rounded float-right" style="height: 300px; width: 300px;"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous" type="text/javascript">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous" type="text/javascript">
    </script>
</body>

</html>